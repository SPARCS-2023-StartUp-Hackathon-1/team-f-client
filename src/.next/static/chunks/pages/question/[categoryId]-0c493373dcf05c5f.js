(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{5375:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/question/[categoryId]",function(){return n(8122)}])},8122:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return V}});var t=n(9722),s=n(169),i=n(2050),a=n(4246),u=n(9853),o=n(3842),l=n(9312),c=n(2172),d=n(5359);function x(e){var r=e.children;return(0,a.jsx)("div",{className:"z-10 relative p-[16px] rounded-[8px] align-middle text-center m-auto w-[322px] bg-gray-0",children:r})}var f=n(1563),p=n(7378),b=n(6079),m=(0,p.forwardRef)((function(e,r){var n=e.overlayElement,t=e.onExit,s=(0,p.useState)(!1),i=(0,f.ZQ)(s,2),u=i[0],o=i[1],l=(0,p.useCallback)((function(){return o(!1)}),[]);return(0,p.useImperativeHandle)(r,(function(){return{close:l}}),[l]),(0,p.useEffect)((function(){requestAnimationFrame((function(){o(!0)}))}),[]),(0,a.jsx)(n,{isOpen:u,close:l,exit:t})})),v=1;var w=function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).exitOnUnmount,r=void 0===e||e,n=(0,p.useContext)(b.i);if(null==n)throw new Error("useOverlay is only available within OverlayProvider.");var t=n.mount,s=n.unmount,i=(0,p.useState)((function(){return String(v++)})),u=(0,f.ZQ)(i,1)[0],o=(0,p.useRef)(null);return(0,p.useEffect)((function(){return function(){r&&s(u)}}),[r,u,s]),(0,p.useMemo)((function(){return{open:function(e){t(u,(0,a.jsx)(m,{ref:o,overlayElement:e,onExit:function(){s(u)}},Date.now()))},close:function(){var e;null===(e=o.current)||void 0===e||e.close()},exit:function(){s(u)}}}),[u,t,s])}(),r=(0,p.useRef)(null);return{openModal:function(n){return new Promise((function(s){e.open((function(e){var i=e.isOpen,u=e.close;return(0,a.jsx)(a.Fragment,{children:i?(0,a.jsx)("div",{style:{position:"fixed",top:"0",backgroundColor:"rgba(0, 0, 0, 0.5)"},className:"w-full flex h-full items-center",ref:r,onClick:function(e){e.target===r.current&&u(),s(!1)},children:(0,a.jsx)(x,(0,t.Z)({},n))}):null})}))}))},close:e.close}},h=n(6677),y=function(e){var r=e.headerTitle,n=(0,h.useRouter)(),t=w(),s=t.openModal,i=t.close,u=function(){var e=(0,o.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,s({children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-subtitle",children:"\uba74\uc811 \uc5f0\uc2b5 \ub098\uac00\uae30 "}),(0,a.jsx)("div",{className:"text-b1 text-gray-300 mt-[24px]",children:"\uba74\uc811 \uc5f0\uc2b5\uc744 \ub098\uac00\uaca0\uc2b5\ub2c8\uae4c?"}),(0,a.jsx)("div",{className:"text-b1 text-gray-300 mt-[4px]",children:"\uc9c8\ubb38\uacfc \ub2f5\ubcc0 \ub0b4\uc6a9\uc740 \uae30\ub85d\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 w-full mt-[24px] gap-4",children:[(0,a.jsx)(c.z,{buttonType:"gray",onClick:function(){i()},buttonText:"\ucde8\uc18c"}),(0,a.jsx)(c.z,{buttonType:"red",onClick:function(){n.push("/onboarding")},buttonText:"\ub05d\ub0b4\uae30"})]})]})})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:"w-full bg-gray-50 flex pl-[6px] h-[48px] items-center pr-[46px]",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:function(){u()},children:(0,a.jsx)(d.J,{iconName:"toGoHome"})}),(0,a.jsx)("div",{className:"text-b1 m-auto",children:r})]})},g=n(8928),j=function(e){var r=e.questionChip,n=e.question,t=e.answerChip,s=e.answer;return(0,a.jsx)(a.Fragment,{children:s?(0,a.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,a.jsxs)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[0px] rounded-br-[8px] w-full bg-gray-0 text-subtitle text-gray-700",children:[(0,a.jsx)("div",{className:"mb-[8px]",children:r}),n,(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 my-[16px]"}),(0,a.jsx)("div",{className:"mb-[8px]",children:t}),s]}),(0,a.jsx)("div",{className:"absolute w-0 h-0 border-r-[15px] border-r-transparent border-t-[15px] border-t-gray-0 left-0 bottom-[-11px] "})]}):(0,a.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,a.jsxs)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[0px] rounded-br-[8px] w-full bg-gray-0 text-subtitle text-gray-700",children:[(0,a.jsx)("div",{className:"mb-[8px]",children:r}),n]}),(0,a.jsx)("div",{className:"absolute w-0 h-0 border-r-[15px] border-r-transparent border-t-[15px] border-t-gray-0 left-0 bottom-[-11px] "})]})})},N={question:"bg-secondary-default text-gray-0",answer:"bg-primary-default text-gray-0",default:"bg-gray-50 text-gray-300"},Z=function(e){var r=e.text,n=e.chipType;return(0,a.jsx)("div",{className:"w-fit px-[8px] py-[4px] rounded-[80px] text-caption ".concat(N[n]),children:r})},A=n(556),C=function(e){var r=e.onChange,n=e.value,t=(0,p.useState)(!1),s=t[0],i=t[1];return(0,a.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,a.jsx)("textarea",{value:n,id:"input",onFocus:function(){i(!0)},onBlur:function(){i(!1)},onChange:r,placeholder:"\ub2f5\ubcc0\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",className:"resize-none h-[112px] scrollbar-hide px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[8px] rounded-br-[0px] w-full bg-gray-100 text-subtitle text-gray-700 placeholder:text-subtitle placeholder:text-gray-300 focus:outline-none focus:ring-gray-200 focus:ring-[2px] no-scrollbar "}),!1===s?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"absolute w-0 h-0 border-l-[15px] border-l-transparent border-t-[15px] border-t-gray-100 right-0 bottom-[-11px] "})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-0 h-0 before:border-l-[18px] before:border-l-transparent before:border-t-[18px] before:border-t-gray-200 before:right-[-2px] before:absolute before:bottom-[-15px] after:border-l-[14px] after:border-l-transparent after:border-t-[15px] after:border-t-gray-100 after:right-0 after:absolute after:bottom-[-11px] "})})]})},T=function(e){var r=e.pageNumber,n=e.isActive;return(0,a.jsx)("div",{className:"flex w-[36px] h-[36px] text-b2 items-center justify-center ".concat(n?"text-primary-default border-2 border-primary-default rounded-[50%] bg-gray-0":"text-gray-300 bg-gray-0 rounded-[50%]"),children:r})},q=n(719);var k=n(2126);var E=n(2164);function F(e){return function(e){if(Array.isArray(e))return(0,q.Z)(e)}(e)||(0,k.Z)(e)||(0,E.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=n(5411),z=function(e){var r=e.answer;return(0,a.jsxs)("div",{className:"flex-col relative w-full",children:[(0,a.jsx)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[8px] rounded-br-[0px] w-full bg-primary-default text-subtitle text-gray-0 mt-[20px]",children:r}),(0,a.jsx)("div",{className:"absolute w-0 h-0 border-l-[15px] border-l-transparent border-t-[15px] border-t-primary-default right-0 bottom-[-11px] "})]})},I=n(678),Q=n(739),O=function(e){return(0,Q.a)({queryKey:["answer",e],queryFn:function(){return(0,I.p)(e)},enabled:!!e})},S=function(e){var r,n=e.id,o=(0,i.Z)((0,u.FV)(_.ZE),2),l=o[0],x=o[1],f=(0,i.Z)((0,u.FV)(_.CO),2),b=f[0],m=f[1],v=((0,u.Zl)((0,_.fw)(l)),r=n,(0,Q.a)({queryKey:["tailQuestion",r],queryFn:function(){return(0,I.BI)(r)},enabled:!!r})),w=v.data,h=v.isSuccess,y=(0,i.Z)((0,u.FV)((0,_.Y$)(null===w||void 0===w?void 0:w.id)),2),g=y[0],N=y[1],T=(0,i.Z)((0,u.FV)((0,_.DN)(l)),2),q=T[0],k=T[1],E=O(null===w||void 0===w?void 0:w.id),S=E.data,D=E.isSuccess;(0,p.useEffect)((function(){D&&N((function(e){return(0,s.Z)((0,t.Z)({},e),{aiAnswer:S.answer})}))}),[]);var V=g.userAnswer.isAnswer,R=""===g.userAnswer.answer&&!V,J=q.length>=3;return(0,a.jsxs)("div",{className:"w-full",children:[h&&(0,a.jsx)(j,{questionChip:(0,a.jsx)(Z,{text:"\uaf2c\ub9ac \uc9c8\ubb38",chipType:"answer"}),question:w.question,answerChip:(0,a.jsx)(Z,{text:"AI \ub2f5\ubcc0",chipType:"default"}),answer:V?g.aiAnswer:""},null===w||void 0===w?void 0:w.id),!V&&(0,a.jsx)(C,{value:g.userAnswer.answer,onChange:function(e){N((function(r){return(0,s.Z)((0,t.Z)({},r),{userAnswer:{isAnswer:!1,answer:e.target.value}})}))}}),V&&(0,a.jsx)(z,{answer:g.userAnswer.answer}),(0,a.jsx)(A.D,{children:V?(0,a.jsxs)("div",{className:"grid grid-cols-[0.8fr_0.2fr] gap-[1rem]",children:[(0,a.jsx)(c.z,{onClick:function(){h&&!J&&k((function(e){return F(e).concat([w.id])}))},buttonType:"primary",buttonText:"\uaf2c\ub9ac \uc9c8\ubb38",isDisabled:J}),(0,a.jsx)(c.z,{onClick:function(){x(b+1),m((function(e){return e+1}))},buttonType:"sub",buttonIcon:(0,a.jsx)(d.J,{iconName:"rightArrow",size:24})})]}):(0,a.jsx)(c.z,{onClick:function(){N((function(e){return(0,s.Z)((0,t.Z)({},e),{userAnswer:{isAnswer:!0,answer:e.userAnswer.answer}})}))},buttonType:"primary",buttonText:"\uc791\uc131 \uc644\ub8cc",isDisabled:R})})]})},D=function(){var e=(0,i.Z)((0,u.FV)(g.ZE),2),r=e[0],n=e[1],o=(0,i.Z)((0,u.FV)(g.CO),2),l=o[0],x=o[1],f=(0,i.Z)((0,u.FV)((0,g.fw)(r)),2),b=f[0],m=f[1],v=(0,i.Z)((0,u.FV)((0,g.DN)(r)),2),w=v[0],h=(v[1],O(b.basicQuestion.id)),y=h.data,N=h.isSuccess,q=b.userAnswer.isAnswer,k=""===b.userAnswer.answer&&!q;(0,p.useEffect)((function(){N&&m((function(e){return(0,s.Z)((0,t.Z)({},e),{aiAnswer:y.answer})}))}),[N]);return(0,a.jsxs)("div",{className:"h-full pb-[100px]",children:[(0,a.jsx)("div",{className:"h-[64px] flex items-center",children:Array(l).fill(0).map((function(e,t){return(0,a.jsx)("div",{className:"first:ml-0 ml-[0.8rem]",onClick:function(){return function(e){n(e+1)}(t)},children:(0,a.jsx)(T,{pageNumber:t+1,isActive:r===t+1})},t)}))}),(0,a.jsx)(j,{questionChip:(0,a.jsx)(Z,{text:"\uc77c\ubc18 \uc9c8\ubb38",chipType:"default"}),question:b.basicQuestion.question,answerChip:(0,a.jsx)(Z,{text:"AI \ub2f5\ubcc0",chipType:"default"}),answer:q?b.aiAnswer:""}),!q&&(0,a.jsx)(C,{value:b.userAnswer.answer,onChange:function(e){m((function(r){return(0,s.Z)((0,t.Z)({},r),{userAnswer:{isAnswer:r.userAnswer.isAnswer,answer:e.target.value}})}))}}),q&&(0,a.jsx)(z,{answer:b.userAnswer.answer}),b.isTailQuestion&&w.map((function(e,r){return(0,a.jsx)(S,{id:e},r)})),!b.isTailQuestion&&(0,a.jsx)(A.D,{children:q&&!b.isTailQuestion?(0,a.jsxs)("div",{className:"flex gap-[1rem]",children:[(0,a.jsx)(c.z,{onClick:function(){m((function(e){return(0,s.Z)((0,t.Z)({},e),{isTailQuestion:!0})}))},buttonType:"primary",buttonText:"\uaf2c\ub9ac \uc9c8\ubb38"}),(0,a.jsx)(c.z,{onClick:function(){n(l+1),x((function(e){return e+1}))},buttonType:"sub",buttonIcon:(0,a.jsx)(d.J,{iconName:"rightArrow",size:24})})]}):(0,a.jsx)(c.z,{onClick:function(){m((function(e){return(0,s.Z)((0,t.Z)({},e),{userAnswer:{isAnswer:!0,answer:e.userAnswer.answer}})}))},buttonType:"primary",buttonText:"\uc791\uc131 \uc644\ub8cc",isDisabled:k})})]})},V=function(){var e,r=(0,h.useRouter)(),n=null===r||void 0===r||null===(e=r.query)||void 0===e?void 0:e.categoryId,o=function(e){return(0,Q.a)({queryKey:["midCategoryById",e],queryFn:function(){return(0,I.k0)(e)},enabled:!!e})}(Number(n)),l=o.data,c=o.isSuccess,d=function(e){return(0,Q.a)({queryKey:["defaultQuestion"],queryFn:function(){return(0,I.U3)(e)},enabled:!!e})}(Number(n)),x=d.data,f=d.isSuccess,b=d.refetch,m=d.isRefetching,v=(0,u.sJ)(g.ZE),w=(0,u.sJ)(g.CO),j=(0,i.Z)((0,u.FV)((0,g.fw)(v)),2),N=(j[0],j[1]),Z=(0,u.Zl)((0,g.DN)(v));return(0,p.useEffect)((function(){w===v&&b()}),[v]),(0,p.useEffect)((function(){f&&(N((function(e){return(0,s.Z)((0,t.Z)({},e),{basicQuestion:{id:x.id,question:x.question}})})),Z([x.id]))}),[f,m]),(0,a.jsxs)("div",{className:"w-full",children:[c&&(0,a.jsx)(y,{headerTitle:l.name}),(0,a.jsx)(D,{})]})}}},function(e){e.O(0,[39,616,774,888,179],(function(){return r=5375,e(e.s=r);var r}));var r=e.O();_N_E=r}]);