(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{9292:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/question/[categoryId]",function(){return n(6022)}])},6022:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return V}});var t=n(1799),s=n(9396),i=n(5893),a=n(4480),u=(0,a.xu)({key:"questionAtomFamily",default:function(e){return{basicQuestion:{id:0,question:""},userAnswer:{isAnswer:!1,answer:""},aiAnswer:"",isTailQuestion:!1}}}),o=(0,a.xu)({key:"tailQuestionAtomFamily",default:function(e){return{userAnswer:{isAnswer:!1,answer:""},aiAnswer:""}}}),l=(0,a.xu)({key:"tailQuestionIdAtomFamily",default:[]}),c=((0,a.cn)({key:"questionIsSubmitAtom",default:!1}),(0,a.cn)({key:"questionOrderAtom",default:1})),d=n(7568),x=n(655),f=n(9864),p=n(4616);function b(e){var r=e.children;return(0,i.jsx)("div",{className:"z-10 relative p-[16px] rounded-[8px] align-middle text-center m-auto w-[322px] bg-gray-0",children:r})}var m=n(7837),w=n(7294),v=n(2691),y=(0,w.forwardRef)((function(e,r){var n=e.overlayElement,t=e.onExit,s=(0,w.useState)(!1),a=(0,m.ZQ)(s,2),u=a[0],o=a[1],l=(0,w.useCallback)((function(){return o(!1)}),[]);return(0,w.useImperativeHandle)(r,(function(){return{close:l}}),[l]),(0,w.useEffect)((function(){requestAnimationFrame((function(){o(!0)}))}),[]),(0,i.jsx)(n,{isOpen:u,close:l,exit:t})})),h=1;function g(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).exitOnUnmount,r=void 0===e||e,n=(0,w.useContext)(v.i);if(null==n)throw new Error("useOverlay is only available within OverlayProvider.");var t=n.mount,s=n.unmount,a=(0,w.useState)((function(){return String(h++)})),u=(0,m.ZQ)(a,1)[0],o=(0,w.useRef)(null);return(0,w.useEffect)((function(){return function(){r&&s(u)}}),[r,u,s]),(0,w.useMemo)((function(){return{open:function(e){t(u,(0,i.jsx)(y,{ref:o,overlayElement:e,onExit:function(){s(u)}},Date.now()))},close:function(){var e;null===(e=o.current)||void 0===e||e.close()},exit:function(){s(u)}}}),[u,t,s])}(),r=(0,w.useRef)(null);return{openModal:function(n){return new Promise((function(s){e.open((function(e){var a=e.isOpen,u=e.close;return(0,i.jsx)(i.Fragment,{children:a?(0,i.jsx)("div",{style:{position:"fixed",top:"0",backgroundColor:"rgba(0, 0, 0, 0.5)"},className:"w-full flex h-full items-center",ref:r,onClick:function(e){e.target===r.current&&u(),s(!1)},children:(0,i.jsx)(b,(0,t.Z)({},n))}):null})}))}))},close:e.close}}var j=n(1163),N=function(e){var r=e.headerTitle,n=(0,j.useRouter)(),t=g(),s=t.openModal,a=t.close,u=function(){var e=(0,d.Z)((function(){return(0,x.__generator)(this,(function(e){switch(e.label){case 0:return[4,s({children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"text-subtitle",children:"\uba74\uc811 \uc5f0\uc2b5 \ub098\uac00\uae30 "}),(0,i.jsx)("div",{className:"text-b1 text-gray-300 mt-[24px]",children:"\uba74\uc811 \uc5f0\uc2b5\uc744 \ub098\uac00\uaca0\uc2b5\ub2c8\uae4c?"}),(0,i.jsx)("div",{className:"text-b1 text-gray-300 mt-[4px]",children:"\uc9c8\ubb38\uacfc \ub2f5\ubcc0 \ub0b4\uc6a9\uc740 \uae30\ub85d\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 w-full mt-[24px] gap-4",children:[(0,i.jsx)(f.z,{buttonType:"gray",onClick:function(){a()},buttonText:"\ucde8\uc18c"}),(0,i.jsx)(f.z,{buttonType:"red",onClick:function(){n.push("/onboarding")},buttonText:"\ub05d\ub0b4\uae30"})]})]})})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"w-full bg-gray-50 flex pl-[6px] h-[48px] items-center pr-[46px]",children:[(0,i.jsx)("div",{className:"cursor-pointer",onClick:function(){u()},children:(0,i.jsx)(p.J,{iconName:"toGoHome"})}),(0,i.jsx)("div",{className:"text-b1 m-auto",children:r})]})},A=n(828),Z=n(1280),T=n(8934),q=function(e){return(0,T.a)({queryKey:["answer",e],queryFn:function(){return(0,Z.p)(e)},enabled:!!e})},C=function(e){var r=e.questionChip,n=e.question,t=e.answerChip,s=e.answer;return(0,i.jsx)(i.Fragment,{children:s?(0,i.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,i.jsxs)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[0px] rounded-br-[8px] w-full bg-gray-0 text-subtitle text-gray-700",children:[(0,i.jsx)("div",{className:"mb-[8px]",children:r}),n,(0,i.jsx)("div",{className:"h-[1px] bg-gray-100 my-[16px]"}),(0,i.jsx)("div",{className:"mb-[8px]",children:t}),s]}),(0,i.jsx)("div",{className:"absolute w-0 h-0 border-r-[15px] border-r-transparent border-t-[15px] border-t-gray-0 left-0 bottom-[-11px] "})]}):(0,i.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,i.jsxs)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[0px] rounded-br-[8px] w-full bg-gray-0 text-subtitle text-gray-700",children:[(0,i.jsx)("div",{className:"mb-[8px]",children:r}),n]}),(0,i.jsx)("div",{className:"absolute w-0 h-0 border-r-[15px] border-r-transparent border-t-[15px] border-t-gray-0 left-0 bottom-[-11px] "})]})})},k={question:"bg-secondary-default text-gray-0",answer:"bg-primary-default text-gray-0",default:"bg-gray-50 text-gray-300"},F=function(e){var r=e.text,n=e.chipType;return(0,i.jsx)("div",{className:"w-fit px-[8px] py-[4px] rounded-[80px] text-caption ".concat(k[n]),children:r})},E=n(7111),_=function(e){var r=e.onChange,n=e.value,t=(0,w.useState)(!1),s=t[0],a=t[1];return(0,i.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,i.jsx)("textarea",{value:n,id:"input",onFocus:function(){a(!0)},onBlur:function(){a(!1)},onChange:r,placeholder:"\ub2f5\ubcc0\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",className:"resize-none h-[112px] scrollbar-hide px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[8px] rounded-br-[0px] w-full bg-gray-100 text-subtitle text-gray-700 placeholder:text-subtitle placeholder:text-gray-300 focus:outline-none focus:ring-gray-200 focus:ring-[2px] no-scrollbar "}),!1===s?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"absolute w-0 h-0 border-l-[15px] border-l-transparent border-t-[15px] border-t-gray-100 right-0 bottom-[-11px] "})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"w-0 h-0 before:border-l-[18px] before:border-l-transparent before:border-t-[18px] before:border-t-gray-200 before:right-[-2px] before:absolute before:bottom-[-15px] after:border-l-[14px] after:border-l-transparent after:border-t-[15px] after:border-t-gray-100 after:right-0 after:absolute after:bottom-[-11px] "})})]})},Q=function(e){var r=e.pageNumber,n=e.isActive;return(0,i.jsx)("div",{className:"flex w-[36px] h-[36px] text-b2 items-center justify-center ".concat(n?"text-primary-default border-2 border-primary-default rounded-[50%] bg-gray-0":"text-gray-300 bg-gray-0"),children:r})},I=function(e){var r=e.answer;return(0,i.jsxs)("div",{className:"flex-col relative w-full",children:[(0,i.jsx)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[8px] rounded-br-[0px] w-full bg-primary-default text-subtitle text-gray-0 mt-[20px]",children:r}),(0,i.jsx)("div",{className:"absolute w-0 h-0 border-l-[15px] border-l-transparent border-t-[15px] border-t-primary-default right-0 bottom-[-11px] "})]})},z=n(943);var S=n(3375);var O=n(1566);function D(e){return function(e){if(Array.isArray(e))return(0,z.Z)(e)}(e)||(0,S.Z)(e)||(0,O.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=function(e){var r,n=e.id,d=(0,a.sJ)(c),x=((0,a.Zl)(u(d)),r=n,(0,T.a)({queryKey:["tailQuestion",r],queryFn:function(){return(0,Z.BI)(r)},enabled:!!r})),b=x.data,m=x.isSuccess,v=(0,A.Z)((0,a.FV)(o(null===b||void 0===b?void 0:b.id)),2),y=v[0],h=v[1],g=(0,A.Z)((0,a.FV)(l(d)),2),j=(g[0],g[1]),N=q(null===b||void 0===b?void 0:b.id),k=N.data,Q=N.isSuccess;(0,w.useEffect)((function(){Q&&h((function(e){return(0,s.Z)((0,t.Z)({},e),{aiAnswer:k.answer})}))}),[]);var z=y.userAnswer.isAnswer,S=""===y.userAnswer.answer&&!z;return(0,i.jsxs)("div",{className:"w-full",children:[m&&(0,i.jsx)(C,{questionChip:(0,i.jsx)(F,{text:"\uaf2c\ub9ac \uc9c8\ubb38",chipType:"answer"}),question:b.question,answerChip:(0,i.jsx)(F,{text:"AI \ub2f5\ubcc0",chipType:"default"}),answer:z?y.aiAnswer:""},null===b||void 0===b?void 0:b.id),!z&&(0,i.jsx)(_,{value:y.userAnswer.answer,onChange:function(e){h((function(r){return(0,s.Z)((0,t.Z)({},r),{userAnswer:{isAnswer:!1,answer:e.target.value}})}))}}),z&&(0,i.jsx)(I,{answer:y.userAnswer.answer}),(0,i.jsx)(E.D,{children:z?(0,i.jsxs)("div",{className:"grid grid-cols-[0.8fr_0.2fr] gap-[1rem]",children:[(0,i.jsx)(f.z,{onClick:function(){m&&j((function(e){return D(e).concat([b.id])}))},buttonType:"primary",buttonText:"\uaf2c\ub9ac \uc9c8\ubb38"}),(0,i.jsx)(f.z,{onClick:function(){},buttonType:"sub",buttonIcon:(0,i.jsx)(p.J,{iconName:"rightArrow",size:24})})]}):(0,i.jsx)(f.z,{onClick:function(){h((function(e){return(0,s.Z)((0,t.Z)({},e),{userAnswer:{isAnswer:!0,answer:e.userAnswer.answer}})}))},buttonType:"primary",buttonText:"\uc791\uc131 \uc644\ub8cc",isDisabled:S})})]})},R=function(){var e=(0,A.Z)((0,a.FV)(c),2),r=e[0],n=e[1],o=(0,A.Z)((0,a.FV)(u(r)),2),d=o[0],x=o[1],b=(0,A.Z)((0,a.FV)(l(r)),2),m=b[0],v=(b[1],q(d.basicQuestion.id)),y=v.data,h=v.isSuccess,g=d.userAnswer.isAnswer,j=""===d.userAnswer.answer&&!g;(0,w.useEffect)((function(){h&&x((function(e){return(0,s.Z)((0,t.Z)({},e),{aiAnswer:y.answer})}))}),[h]);return(0,i.jsxs)("div",{className:"h-full pb-[100px]",children:[(0,i.jsx)("div",{className:"h-[64px] flex items-center",children:(0,i.jsx)(Q,{pageNumber:r,isActive:!0})}),(0,i.jsx)(C,{questionChip:(0,i.jsx)(F,{text:"\uc77c\ubc18 \uc9c8\ubb38",chipType:"default"}),question:d.basicQuestion.question,answerChip:(0,i.jsx)(F,{text:"AI \ub2f5\ubcc0",chipType:"default"}),answer:g?d.aiAnswer:""}),!g&&(0,i.jsx)(_,{value:d.userAnswer.answer,onChange:function(e){x((function(r){return(0,s.Z)((0,t.Z)({},r),{userAnswer:{isAnswer:r.userAnswer.isAnswer,answer:e.target.value}})}))}}),g&&(0,i.jsx)(I,{answer:d.userAnswer.answer}),d.isTailQuestion&&m.map((function(e,r){return(0,i.jsx)(J,{id:e},r)})),!d.isTailQuestion&&(0,i.jsx)(E.D,{children:g&&!d.isTailQuestion?(0,i.jsxs)("div",{className:"grid grid-cols-[0.8fr_0.2fr] gap-[1rem]",children:[(0,i.jsx)(f.z,{onClick:function(){x((function(e){return(0,s.Z)((0,t.Z)({},e),{isTailQuestion:!0})}))},buttonType:"primary",buttonText:"\uaf2c\ub9ac \uc9c8\ubb38"}),(0,i.jsx)(f.z,{onClick:function(){n((function(e){return e+1}))},buttonType:"sub",buttonIcon:(0,i.jsx)(p.J,{iconName:"rightArrow",size:24})})]}):(0,i.jsx)(f.z,{onClick:function(){x((function(e){return(0,s.Z)((0,t.Z)({},e),{userAnswer:{isAnswer:!0,answer:e.userAnswer.answer}})}))},buttonType:"primary",buttonText:"\uc791\uc131 \uc644\ub8cc",isDisabled:j})})]})},V=function(){var e,r=(0,j.useRouter)(),n=null===r||void 0===r||null===(e=r.query)||void 0===e?void 0:e.categoryId,o=function(e){return(0,T.a)({queryKey:["midCategoryById",e],queryFn:function(){return(0,Z.k0)(e)},enabled:!!e})}(Number(n)),d=o.data,x=o.isSuccess,f=function(e){return(0,T.a)({queryKey:["defaultQuestion"],queryFn:function(){return(0,Z.U3)(e)},enabled:!!e})}(Number(n)),p=f.data,b=f.isSuccess,m=(0,a.sJ)(c),v=(0,a.Zl)(u(m)),y=(0,a.Zl)(l(m));return(0,w.useEffect)((function(){b&&(v((function(e){return(0,s.Z)((0,t.Z)({},e),{basicQuestion:{id:p.id,question:p.question}})})),y([p.id]))}),[]),(0,i.jsxs)("div",{className:"w-full",children:[x&&(0,i.jsx)(N,{headerTitle:d.name}),(0,i.jsx)(R,{})]})}}},function(e){e.O(0,[800,137,774,888,179],(function(){return r=9292,e(e.s=r);var r}));var r=e.O();_N_E=r}]);