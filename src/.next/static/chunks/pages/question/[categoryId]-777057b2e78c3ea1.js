(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{5375:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/question/[categoryId]",function(){return n(8122)}])},8122:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return V},default:function(){return R}});var t=n(9722),s=n(169),i=n(2050),a=n(4246),u=n(8928),o=n(9853),l=n(3842),c=n(9312),d=n(2172),x=n(5359);function f(e){var r=e.children;return(0,a.jsx)("div",{className:"z-10 relative p-[16px] rounded-[8px] align-middle text-center m-auto w-[322px] bg-gray-0",children:r})}var p=n(1563),b=n(7378),m=n(6079),w=(0,b.forwardRef)((function(e,r){var n=e.overlayElement,t=e.onExit,s=(0,b.useState)(!1),i=(0,p.ZQ)(s,2),u=i[0],o=i[1],l=(0,b.useCallback)((function(){return o(!1)}),[]);return(0,b.useImperativeHandle)(r,(function(){return{close:l}}),[l]),(0,b.useEffect)((function(){requestAnimationFrame((function(){o(!0)}))}),[]),(0,a.jsx)(n,{isOpen:u,close:l,exit:t})})),h=1;var v=function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).exitOnUnmount,r=void 0===e||e,n=(0,b.useContext)(m.i);if(null==n)throw new Error("useOverlay is only available within OverlayProvider.");var t=n.mount,s=n.unmount,i=(0,b.useState)((function(){return String(h++)})),u=(0,p.ZQ)(i,1)[0],o=(0,b.useRef)(null);return(0,b.useEffect)((function(){return function(){r&&s(u)}}),[r,u,s]),(0,b.useMemo)((function(){return{open:function(e){t(u,(0,a.jsx)(w,{ref:o,overlayElement:e,onExit:function(){s(u)}},Date.now()))},close:function(){var e;null===(e=o.current)||void 0===e||e.close()},exit:function(){s(u)}}}),[u,t,s])}(),r=(0,b.useRef)(null);return{openModal:function(n){return new Promise((function(s){e.open((function(e){var i=e.isOpen,u=e.close;return(0,a.jsx)(a.Fragment,{children:i?(0,a.jsx)("div",{style:{position:"fixed",top:"0",backgroundColor:"rgba(0, 0, 0, 0.5)"},className:"w-full flex h-full items-center",ref:r,onClick:function(e){e.target===r.current&&u(),s(!1)},children:(0,a.jsx)(f,(0,t.Z)({},n))}):null})}))}))},close:e.close}},y=n(6677),g=function(e){var r=e.headerTitle,n=(0,y.useRouter)(),t=v(),s=t.openModal,i=t.close,u=function(){var e=(0,l.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,s({children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-subtitle",children:"\uba74\uc811 \uc5f0\uc2b5 \ub098\uac00\uae30 "}),(0,a.jsx)("div",{className:"text-b1 text-gray-300 mt-[24px]",children:"\uba74\uc811 \uc5f0\uc2b5\uc744 \ub098\uac00\uaca0\uc2b5\ub2c8\uae4c?"}),(0,a.jsx)("div",{className:"text-b1 text-gray-300 mt-[4px]",children:"\uc9c8\ubb38\uacfc \ub2f5\ubcc0 \ub0b4\uc6a9\uc740 \uae30\ub85d\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 w-full mt-[24px] gap-4",children:[(0,a.jsx)(d.z,{buttonType:"gray",onClick:function(){i()},buttonText:"\ucde8\uc18c"}),(0,a.jsx)(d.z,{buttonType:"red",onClick:function(){n.push("/onboarding")},buttonText:"\ub05d\ub0b4\uae30"})]})]})})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:"w-full bg-gray-50 flex pl-[6px] h-[48px] items-center pr-[46px]",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:function(){u()},children:(0,a.jsx)(x.J,{iconName:"toGoHome"})}),(0,a.jsx)("div",{className:"text-b1 m-auto",children:r})]})},j=function(e){var r=e.questionChip,n=e.question,t=e.answerChip,s=e.answer;return(0,a.jsx)(a.Fragment,{children:s?(0,a.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,a.jsxs)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[0px] rounded-br-[8px] w-full bg-gray-0 text-subtitle text-gray-700",children:[(0,a.jsx)("div",{className:"mb-[8px]",children:r}),n,(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 my-[16px]"}),(0,a.jsx)("div",{className:"mb-[8px]",children:t}),s]}),(0,a.jsx)("div",{className:"absolute w-0 h-0 border-r-[15px] border-r-transparent border-t-[15px] border-t-gray-0 left-0 bottom-[-11px] "})]}):(0,a.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,a.jsxs)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[0px] rounded-br-[8px] w-full bg-gray-0 text-subtitle text-gray-700",children:[(0,a.jsx)("div",{className:"mb-[8px]",children:r}),n]}),(0,a.jsx)("div",{className:"absolute w-0 h-0 border-r-[15px] border-r-transparent border-t-[15px] border-t-gray-0 left-0 bottom-[-11px] "})]})})},N={question:"bg-secondary-default text-gray-0",answer:"bg-primary-default text-gray-0",default:"bg-gray-50 text-gray-300"},Z=function(e){var r=e.text,n=e.chipType;return(0,a.jsx)("div",{className:"w-fit px-[8px] py-[4px] rounded-[80px] text-caption ".concat(N[n]),children:r})},A=n(556),C=function(e){var r=e.onChange,n=e.value,t=(0,b.useState)(!1),s=t[0],i=t[1];return(0,a.jsxs)("div",{className:"flex-col relative w-full mt-[20px]",children:[(0,a.jsx)("textarea",{value:n,id:"input",onFocus:function(){i(!0)},onBlur:function(){i(!1)},onChange:r,placeholder:"\ub2f5\ubcc0\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",className:"resize-none h-[112px] scrollbar-hide px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[8px] rounded-br-[0px] w-full bg-gray-100 text-subtitle text-gray-700 placeholder:text-subtitle placeholder:text-gray-300 focus:outline-none focus:ring-gray-200 focus:ring-[2px] no-scrollbar "}),!1===s?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"absolute w-0 h-0 border-l-[15px] border-l-transparent border-t-[15px] border-t-gray-100 right-0 bottom-[-11px] "})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-0 h-0 before:border-l-[18px] before:border-l-transparent before:border-t-[18px] before:border-t-gray-200 before:right-[-2px] before:absolute before:bottom-[-15px] after:border-l-[14px] after:border-l-transparent after:border-t-[15px] after:border-t-gray-100 after:right-0 after:absolute after:bottom-[-11px] "})})]})},T=function(e){var r=e.pageNumber,n=e.isActive;return(0,a.jsx)("div",{className:"flex w-[36px] h-[36px] text-b2 items-center justify-center ".concat(n?"text-primary-default border-2 border-primary-default rounded-[50%] bg-gray-0":"text-gray-300 bg-gray-0 rounded-[50%]"),children:r})},k=n(719);var q=n(2126);var E=n(2164);function F(e){return function(e){if(Array.isArray(e))return(0,k.Z)(e)}(e)||(0,q.Z)(e)||(0,E.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=n(5411),z=function(e){var r=e.answer;return(0,a.jsxs)("div",{className:"flex-col relative w-full",children:[(0,a.jsx)("div",{className:"break-all px-[16px] py-[24px] rounded-t-[8px] rounded-bl-[8px] rounded-br-[0px] w-full bg-primary-default text-subtitle text-gray-0 mt-[20px]",children:r}),(0,a.jsx)("div",{className:"absolute w-0 h-0 border-l-[15px] border-l-transparent border-t-[15px] border-t-primary-default right-0 bottom-[-11px] "})]})},S=n(678),I=n(739),Q=function(e){return(0,I.a)({queryKey:["answer",e],queryFn:function(){return(0,S.p)(e)},enabled:!!e})},O=function(e){var r,n=e.id,u=(0,i.Z)((0,o.FV)(_.ZE),2),l=u[0],c=u[1],f=(0,i.Z)((0,o.FV)(_.CO),2),p=f[0],m=f[1],w=((0,o.Zl)((0,_.fw)(l)),r=n,(0,I.a)({queryKey:["tailQuestion",r],queryFn:function(){return(0,S.BI)(r)},enabled:!!r})),h=w.data,v=w.isSuccess,y=(0,i.Z)((0,o.FV)((0,_.Y$)(null===h||void 0===h?void 0:h.id)),2),g=y[0],N=y[1],T=(0,i.Z)((0,o.FV)((0,_.DN)(l)),2),k=T[0],q=T[1],E=Q(null===h||void 0===h?void 0:h.id),O=E.data,D=E.isSuccess;(0,b.useEffect)((function(){D&&N((function(e){return(0,s.Z)((0,t.Z)({},e),{aiAnswer:O.answer})}))}),[]);var V=g.userAnswer.isAnswer,R=""===g.userAnswer.answer&&!V,J=k.length>=3;return(0,a.jsxs)("div",{className:"w-full",children:[v&&(0,a.jsx)(j,{questionChip:(0,a.jsx)(Z,{text:"\uaf2c\ub9ac \uc9c8\ubb38",chipType:"answer"}),question:h.question,answerChip:(0,a.jsx)(Z,{text:"AI \ub2f5\ubcc0",chipType:"default"}),answer:V?g.aiAnswer:""},null===h||void 0===h?void 0:h.id),!V&&(0,a.jsx)(C,{value:g.userAnswer.answer,onChange:function(e){N((function(r){return(0,s.Z)((0,t.Z)({},r),{userAnswer:{isAnswer:!1,answer:e.target.value}})}))}}),V&&(0,a.jsx)(z,{answer:g.userAnswer.answer}),(0,a.jsx)(A.D,{children:V?(0,a.jsxs)("div",{className:"grid grid-cols-[0.8fr_0.2fr] gap-[1rem]",children:[(0,a.jsx)(d.z,{onClick:function(){v&&!J&&q((function(e){return F(e).concat([h.id])}))},buttonType:"primary",buttonText:"\uaf2c\ub9ac \uc9c8\ubb38",isDisabled:J}),(0,a.jsx)(d.z,{onClick:function(){c(p+1),m((function(e){return e+1}))},buttonType:"sub",buttonIcon:(0,a.jsx)(x.J,{iconName:"rightArrow",size:24})})]}):(0,a.jsx)(d.z,{onClick:function(){N((function(e){return(0,s.Z)((0,t.Z)({},e),{userAnswer:{isAnswer:!0,answer:e.userAnswer.answer}})}))},buttonType:"primary",buttonText:"\uc791\uc131 \uc644\ub8cc",isDisabled:R})})]})},D=function(){var e=(0,i.Z)((0,o.FV)(u.ZE),2),r=e[0],n=e[1],l=(0,i.Z)((0,o.FV)(u.CO),2),c=l[0],f=l[1],p=(0,i.Z)((0,o.FV)((0,u.fw)(r)),2),m=p[0],w=p[1],h=(0,i.Z)((0,o.FV)((0,u.DN)(r)),2),v=h[0],y=(h[1],Q(m.basicQuestion.id)),g=y.data,N=y.isSuccess,k=m.userAnswer.isAnswer,q=""===m.userAnswer.answer&&!k;(0,b.useEffect)((function(){N&&w((function(e){return(0,s.Z)((0,t.Z)({},e),{aiAnswer:g.answer})}))}),[N]);return(0,a.jsxs)("div",{className:"h-full pb-[100px]",children:[(0,a.jsx)("div",{className:"h-[64px] flex items-center",children:Array(c).fill(0).map((function(e,t){return(0,a.jsx)("div",{className:"first:ml-0 ml-[0.8rem]",onClick:function(){return function(e){n(e+1)}(t)},children:(0,a.jsx)(T,{pageNumber:t+1,isActive:r===t+1})},t)}))}),(0,a.jsx)(j,{questionChip:(0,a.jsx)(Z,{text:"\uc77c\ubc18 \uc9c8\ubb38",chipType:"default"}),question:m.basicQuestion.question,answerChip:(0,a.jsx)(Z,{text:"AI \ub2f5\ubcc0",chipType:"default"}),answer:k?m.aiAnswer:""}),!k&&(0,a.jsx)(C,{value:m.userAnswer.answer,onChange:function(e){w((function(r){return(0,s.Z)((0,t.Z)({},r),{userAnswer:{isAnswer:r.userAnswer.isAnswer,answer:e.target.value}})}))}}),k&&(0,a.jsx)(z,{answer:m.userAnswer.answer}),m.isTailQuestion&&v.map((function(e,r){return(0,a.jsx)(O,{id:e},r)})),!m.isTailQuestion&&(0,a.jsx)(A.D,{children:k&&!m.isTailQuestion?(0,a.jsxs)("div",{className:"flex gap-[1rem]",children:[(0,a.jsx)(d.z,{onClick:function(){w((function(e){return(0,s.Z)((0,t.Z)({},e),{isTailQuestion:!0})}))},buttonType:"primary",buttonText:"\uaf2c\ub9ac \uc9c8\ubb38"}),(0,a.jsx)(d.z,{onClick:function(){n(c+1),f((function(e){return e+1}))},buttonType:"sub",buttonIcon:(0,a.jsx)(x.J,{iconName:"rightArrow",size:24})})]}):(0,a.jsx)(d.z,{onClick:function(){w((function(e){return(0,s.Z)((0,t.Z)({},e),{userAnswer:{isAnswer:!0,answer:e.userAnswer.answer}})}))},buttonType:"primary",buttonText:"\uc791\uc131 \uc644\ub8cc",isDisabled:q})})]})},V=!0,R=function(e){var r=e.categoryId,n=((0,y.useRouter)(),r),l=function(e){return(0,I.a)({queryKey:["midCategoryById",e],queryFn:function(){return(0,S.k0)(e)},enabled:!!e})}(Number(n)),c=l.data,d=l.isSuccess,x=function(e){return(0,I.a)({queryKey:["defaultQuestion"],queryFn:function(){return(0,S.U3)(e)},enabled:!!e})}(Number(n)),f=x.data,p=x.isSuccess,m=x.refetch,w=x.isRefetching,h=(0,o.sJ)(u.ZE),v=(0,o.sJ)(u.CO),j=(0,i.Z)((0,o.FV)((0,u.fw)(h)),2),N=(j[0],j[1]),Z=(0,o.Zl)((0,u.DN)(h));return(0,b.useEffect)((function(){v===h&&m()}),[h]),(0,b.useEffect)((function(){p&&(N((function(e){return(0,s.Z)((0,t.Z)({},e),{basicQuestion:{id:f.id,question:f.question}})})),Z([f.id]))}),[p,w]),(0,a.jsxs)("div",{className:"w-full",children:[d&&(0,a.jsx)(g,{headerTitle:c.name}),(0,a.jsx)(D,{})]})}}},function(e){e.O(0,[39,616,774,888,179],(function(){return r=5375,e(e.s=r);var r}));var r=e.O();_N_E=r}]);